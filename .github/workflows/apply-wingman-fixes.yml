name: Apply Wingman Fixes

on:
  issue_comment:
    types:
      - created

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  apply-fixes:
    # Only run on PR comments from FlyCI Wingman
    if: github.event.issue.pull_request && (github.event.comment.user.type == 'Bot' && (contains(github.event.comment.user.login, 'wingman') || contains(github.event.comment.user.login, 'fly-ci')))
    runs-on: ubuntu-latest
    steps:
      - name: Log Debug Information
        run: |
          echo "Commenter Username: ${{ github.event.comment.user.login }}"
          echo "Commenter Type: ${{ github.event.comment.user.type }}"
          echo "Is Bot: ${{ github.event.comment.user.type == 'Bot' }}"
          echo "Match Wingman/Fly-CI: ${{ contains(github.event.comment.user.login, 'wingman') || contains(github.event.comment.user.login, 'fly-ci') }}"
        shell: bash
      - name: Verify Environment Variables
        run: |
          env
        shell: bash